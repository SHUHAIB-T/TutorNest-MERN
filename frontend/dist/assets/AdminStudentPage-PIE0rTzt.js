import{r,o as h,B as f,j as e,z as t,K as j,L as N,ar as y}from"./index-NQeHJbx4.js";import{N as b}from"./NavBar-1xl8gbWK.js";import{d as S}from"./ChevronLeft-yO34zc4e.js";import{d as k}from"./Search-3_wGN_v7.js";import{d as v}from"./utilityFuctions-ouM6L3FC.js";import"./Cancel-x3Ews1AB.js";import"./Paper-F7AD0u5h.js";function B({studentData:d,blockId:o,setBlockId:l,unblockId:i,setunBlockId:c}){const x=s=>{j.fire({title:"Are you sure?",text:"are you sure want to block",icon:"question",showCancelButton:!0,confirmButtonText:"Yes Block!"}).then(n=>{n.isConfirmed&&l(s)})},u=s=>{j.fire({title:"Are you sure?",text:"are you sure want to unblock",icon:"question",showCancelButton:!0,confirmButtonText:"Yes Unblock!"}).then(n=>{n.isConfirmed&&c(s)})};return r.useEffect(()=>{(async function(){if(o)try{(await h.patch(`/admin/user-block/${o}`,{},{withCredentials:!0})).data.success&&(l(""),f.success("User Blocked!"))}catch(s){console.log(s)}})()},[o,l]),r.useEffect(()=>{(async function(){if(i)try{(await h.patch(`/admin/user-unblock/${i}`,{},{withCredentials:!0})).data.success&&(c(""),f.success("User Unblocked!"))}catch(s){console.log(s)}})()},[i,c]),e.jsx("div",{className:"overflow-x-auto mytable w-full md:w-[80%] mt-4",children:e.jsxs(t,{children:[e.jsxs(t.Head,{children:[e.jsx(t.HeadCell,{children:"SL No"}),e.jsx(t.HeadCell,{children:"Name"}),e.jsx(t.HeadCell,{children:"Class"}),e.jsx(t.HeadCell,{children:"Email"}),e.jsx(t.HeadCell,{children:"Intrests"}),e.jsx(t.HeadCell,{children:"Status"}),e.jsx(t.HeadCell,{children:e.jsx("span",{className:"sr-only",children:"Block/unblock"})})]}),e.jsx(t.Body,{className:"divide-y",children:d.length>0&&d.map((s,n)=>e.jsx(e.Fragment,{children:e.jsxs(t.Row,{className:"bg-white dark:border-gray-700 dark:bg-gray-800",children:[e.jsx(t.Cell,{className:"whitespace-nowrap font-medium text-gray-900 dark:text-white",children:n+1}),e.jsx(t.Cell,{children:s.name}),e.jsx(t.Cell,{children:s.standard}),e.jsx(t.Cell,{children:s.user.email}),e.jsx(t.Cell,{children:s.intrests.map(m=>e.jsxs("span",{children:[m,", "]}))}),e.jsx(t.Cell,{children:s.user.status?e.jsx("span",{className:"text-green-500 font-bold",children:"active"}):e.jsx("span",{className:"text-red-500 font-bold",children:"Blocked"})}),e.jsx(t.Cell,{children:s.user.status?e.jsx("span",{onClick:()=>x(s.userID),className:"font-medium  cursor-pointer rounded-md bg-red-500 px-5 py-2 text-white",children:"BLOCK"}):e.jsx("span",{onClick:()=>u(s.userID),className:"font-medium  cursor-pointer rounded-md bg-green-500 px-3 py-2 text-white",children:"UNBLOCK"})})]})}))})]})})}function L(){const[d,o]=r.useState([]),[l,i]=r.useState(""),[c,x]=r.useState(""),[u,s]=r.useState(""),[n,m]=r.useState(1),[p,w]=r.useState(0),g=a=>m(a),C=v(a=>{s(a)},500);return r.useEffect(()=>{(async function(){try{const a=await h.get(`/admin/students?search=${u}&&page=${n}`,{withCredentials:!0});o(a.data.students),w(a.data.count)}catch(a){console.log(a)}})()},[l,c,u,n]),e.jsxs(e.Fragment,{children:[e.jsx(b,{role:"ADMIN"}),e.jsxs("div",{className:"flex flex-col items-center md:p-10 p-4 w-full h-[100vh] bg-secondary",children:[e.jsx("h1",{className:"font-bold text-white text-4xl",children:"MANAGE STUDENTS"}),e.jsxs("div",{className:"flex flex-wrap items-center justify-between mt-10 w-full md:w-[80%]",children:[e.jsxs(N,{to:"/",className:"font-bold text-white",children:[e.jsx(S,{className:"mb-1"})," Back"]}),e.jsxs("div",{className:"flex justify-center items-center",children:[e.jsx("input",{onChange:a=>C(a.target.value),className:"h-8 rounded-lg ",type:"text"}),e.jsx(k,{fontSize:"large",className:"text-white"})]})]}),e.jsx(B,{blockId:l,setBlockId:i,setunBlockId:x,studentData:d,unblockId:c},""),e.jsx("div",{className:"flex mypage overflow-x-auto w-[80%] sm:justify-end",children:e.jsx(y,{currentPage:n,totalPages:p,onPageChange:g})})]})]})}export{L as default};
