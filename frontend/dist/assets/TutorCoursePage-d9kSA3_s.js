import{r as c,o as I,B as F,j as e,L as G,K as $,b as E,E as D,G as q,H as T,I as _,M as C,U as B,D as L,h as k,v as g,F as U}from"./index-dYQkEr6H.js";import{d as A,a as H}from"./uploadFirebase-OmwTLwFw.js";import{d as P}from"./ModeEdit-YnnYczC7.js";import{N as K}from"./NavBar-2QL-BYwJ.js";import{d as z}from"./ChevronLeft-ygGI7bzT.js";import"./Cancel-lHxBFVup.js";import"./Paper-TCysvsb2.js";function J({coverIMG:j,description:u,price:n,title:m,_id:x,setUpdated:s,setEditCourseId:i}){const[t,d]=c.useState("");c.useEffect(()=>{(async function(){t&&(await I.patch(`/course/${t}`,{},{withCredentials:!0}),s(!0),d(""),F.success("Course deleted successfully"))})()},[t,s]);const a=p=>{$.fire({title:"Are you sure?",text:"are you sure want to delete this",icon:"warning",showCancelButton:!0,confirmButtonText:"yes delete"}).then(h=>{h.isConfirmed&&d(p)})};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"relative course-card w-72",children:[e.jsxs("div",{className:"flex flex-col bg-mycard-body hover:scale-105 duration-300 hover:shadow-lg w-60 h-fit rounded-2xl",children:[e.jsx("img",{src:j,alt:"",className:"rounded-2xl h-32 object-cover overflow-hidden hover:border-b-4 border-my-ring"}),e.jsxs("div",{className:"leading-none m-3",children:[e.jsx("h1",{className:"font-bold text-white text-2xl",children:m}),e.jsx("div",{children:e.jsxs("small",{className:"text-gray-300",children:[" â‚¹",n]})}),e.jsx("small",{className:"text-white leading-none",children:u})]}),e.jsx(G,{to:`/tutor/lessons/${x}`,children:e.jsx("button",{className:"font-bold text-white w-full bg-primary hover:bg-my-ring py-2 rounded-b-2xl",children:"view"})})]}),e.jsxs("div",{className:"absolute options right-4 top-0 flex flex-col items-center justify-center",children:[e.jsx("div",{onClick:()=>a(x),children:e.jsx(A,{className:"cursor-pointer text-primary hover:text-white"})}),e.jsx("div",{onClick:()=>i(x),children:e.jsx(P,{className:"cursor-pointer text-primary hover:text-white"})})]})]})})}function O({openModal:j,setOpenModal:u,setUpdated:n}){const{user:m}=E(l=>l.auth),x={title:"",coverIMG:"",description:"",price:"",category:"",language:""},[s,i]=c.useState(x),[t,d]=c.useState(x),[a,p]=c.useState(null),[h,o]=c.useState(!1),[v,f]=c.useState(!1),b=l=>{const{name:N,value:r}=l.currentTarget;i({...s,[N]:r}),o(!1)},y=l=>{l.preventDefault(),d({...t,description:g("required",s.description),price:g("required",s.price),title:g("required",s.title),coverIMG:g("required",a),category:g("required",s.category),language:g("required",s.language)}),o(!0)};return c.useEffect(()=>{(async function(){if(!t.coverIMG&&!t.description&&!t.price&&!t.title&&!t.category&&!t.language&&a&&s.description&&s.price&&s.title&&s.category&&s.language&&h)try{f(!0);const l=new Date().getTime()+a.name,N=D(q,"converIMG/"+l);if(await T(N,a)){const w=await _(N),{data:M}=await I.post("/course",{coverIMG:w,title:s.title,description:s.description,price:s.price,language:s.language,category:s.category,teacherId:m==null?void 0:m._id},{withCredentials:!0});M.success&&(u(!1),F.success("Course Created!"),i(x),n(S=>!S),f(!1))}}catch(l){f(!1),console.log(l)}})()},[t,a,s,h,m,u]),e.jsx("div",{children:e.jsxs(C,{show:j,onClose:()=>u(!1),children:[e.jsx(C.Header,{className:"ring-1 ring-[#4d2389] bg-[#110d17] rounded-t-md",children:e.jsx("h1",{className:"text-white font-bold",children:"Create Course"})}),e.jsx(C.Body,{className:"bg-[#110d17] ring-1 ring-[#4d2389] rounded-b-md",children:e.jsxs("div",{className:"grid grid-cols-2 gap-2 w-full",children:[e.jsxs("div",{className:"flex flex-col  md:col-span-1 col-span-2",children:[e.jsx("label",{htmlFor:"title",className:"py-2 text-white",children:"Title"}),t.title&&e.jsx("small",{className:"text-red-600",children:t.title}),e.jsx("input",{onChange:b,className:"bg-[#251c32] text-white border-0 rounded-md",type:"text",name:"title",value:s.title,placeholder:"Enter the title of the course"})]}),e.jsxs("div",{className:"flex flex-col   md:col-span-1 col-span-2",children:[e.jsx("label",{htmlFor:"title",className:"py-2 text-white",children:"Price"}),t.price&&e.jsx("small",{className:"text-red-600",children:t.price}),e.jsx("input",{className:"bg-[#251c32] text-white border-0 rounded-md ",type:"number",name:"price",value:s.price,placeholder:"Enter the price of the course",onChange:b})]}),e.jsxs("div",{className:"flex flex-col   md:col-span-1 col-span-2",children:[e.jsx("label",{htmlFor:"title",className:"py-2 text-white",children:"Category"}),t.category&&e.jsx("small",{className:"text-red-600",children:t.category}),e.jsxs("select",{className:"bg-[#251c32] text-white border-0 rounded-md",name:"category",value:s.category,onChange:b,id:"",children:[e.jsx("option",{value:"",children:"-select category-"}),B.map(l=>e.jsx("option",{value:l,children:l}))]})]}),e.jsxs("div",{className:"flex flex-col   md:col-span-1 col-span-2",children:[e.jsx("label",{htmlFor:"title",className:"py-2 text-white",children:"Language"}),t.language&&e.jsx("small",{className:"text-red-600",children:t.language}),e.jsxs("select",{className:"bg-[#251c32] text-white border-0 rounded-md",name:"language",value:s.language,onChange:b,id:"",children:[e.jsx("option",{value:"",children:"-select language-"}),L.map(l=>e.jsx("option",{value:l,children:l}))]})]}),e.jsxs("div",{className:"flex flex-col col-span-2",children:[e.jsx("label",{htmlFor:"title",className:"py-2 text-white",children:"cover image"}),t.coverIMG&&e.jsx("small",{className:"text-red-600",children:t.coverIMG}),e.jsx("input",{className:"bg-[#251c32] text-white border-0 rounded-md ",type:"file",accept:"image/*",onChange:l=>{l.target.files&&p(l.target.files[0])}})]}),e.jsxs("div",{className:"col-span-2 w-full text-white",children:[e.jsx("label",{htmlFor:"description",children:"Description"}),t.description&&e.jsx("small",{className:"text-red-600",children:t.description}),e.jsx("textarea",{className:"w-full mt-4 rounded-md bg-[#251c32] border-0 py-2",rows:4,name:"description",value:s.description,onChange:b,id:""})]}),v?e.jsx(e.Fragment,{children:e.jsx("div",{className:"font-bold text-white bg-primary flex items-center justify-center rounded-lg",children:e.jsx(k,{})})}):e.jsx("button",{onClick:y,className:"font-bold text-white bg-primary rounded-lg",children:"SUBMIT"}),e.jsx("button",{onClick:()=>i(x),className:"font-bold text-white px-4 py-2 bg-[#3f3b3b] rounded-lg",children:"CLEAR"})]})})]})})}function Q({openModal:j,setOpenModal:u,initialstate:n,setEditCourseId:m,setUpdated:x,setInitialState:s}){const{user:i}=E(r=>r.auth),[t,d]=c.useState(n),[a,p]=c.useState(n),[h,o]=c.useState(null),[v,f]=c.useState(!1),[b,y]=c.useState(!1);c.useEffect(()=>{d(n)},[n]);const l=r=>{const{name:w,value:M}=r.target;d({...t,[w]:M}),f(!1)},N=r=>{r.preventDefault(),p({...a,description:g("required",t.description),price:g("required",t.price),title:g("required",t.title),coverIMG:g("required",t.coverIMG),category:g("required",t.category),language:g("required",t.language)}),f(!0)};return c.useEffect(()=>{(async function(){if(!a.coverIMG&&!a.description&&!a.price&&!a.title&&t.description&&t.price&&t.title&&v)try{if(y(!0),h){await H(n.coverIMG);const r=new Date().getTime()+h.name,w=D(q,"converIMG/"+r);if(await T(w,h)){const S=await _(w);await I.put(`/course/${n._id}`,{coverIMG:S,title:t.title,description:t.description,price:t.price,teacherId:i==null?void 0:i._id,category:t.category,language:t.language},{withCredentials:!0}),u(!1),F.success("Course updated!"),x(R=>!R),f(!1),m(""),s({title:"",coverIMG:"",description:"",price:""}),y(!1)}}else await I.put(`/course/${n._id}`,{title:t.title,description:t.description,price:t.price,teacherId:i==null?void 0:i._id,category:t.category,language:t.language,coverIMG:n.coverIMG},{withCredentials:!0}),u(!1),F.success("Course updated!"),m(""),s({title:"",coverIMG:"",description:"",price:""}),x(r=>!r),f(!1),y(!1)}catch(r){console.log(r),y(!1)}})()},[a,h,t,v,i,u]),e.jsx("div",{children:e.jsxs(C,{show:j,onClose:()=>{u(!1),m(""),s({title:"",coverIMG:"",description:"",price:""})},children:[e.jsx(C.Header,{className:"ring-1 ring-[#4d2389] bg-[#110d17] rounded-t-md",children:e.jsx("h1",{className:"text-white font-bold",children:"Create Course"})}),e.jsx(C.Body,{className:"bg-[#110d17] ring-1 ring-[#4d2389] rounded-b-md",children:e.jsxs("div",{className:"grid grid-cols-2 gap-2 w-full",children:[e.jsxs("div",{className:"flex flex-col  md:col-span-1 col-span-2",children:[e.jsx("label",{htmlFor:"title",className:"py-2 text-white",children:"Title"}),a.title&&e.jsx("small",{className:"text-red-600",children:a.title}),e.jsx("input",{onChange:l,className:"bg-[#251c32] text-white border-0 rounded-md",type:"text",name:"title",value:t.title,placeholder:"Enter the title of the course"})]}),e.jsxs("div",{className:"flex flex-col   md:col-span-1 col-span-2",children:[e.jsx("label",{htmlFor:"title",className:"py-2 text-white",children:"Price"}),a.price&&e.jsx("small",{className:"text-red-600",children:a.price}),e.jsx("input",{className:"bg-[#251c32] text-white border-0 rounded-md ",type:"number",name:"price",value:t.price,placeholder:"Enter the price of the course",onChange:l})]}),e.jsxs("div",{className:"flex flex-col   md:col-span-1 col-span-2",children:[e.jsx("label",{htmlFor:"title",className:"py-2 text-white",children:"Category"}),a.category&&e.jsx("small",{className:"text-red-600",children:a.category}),e.jsxs("select",{className:"bg-[#251c32] text-white border-0 rounded-md",name:"category",value:t.category,onChange:l,id:"",children:[t.category&&e.jsx("option",{value:t.category,children:t.category}),B.map(r=>e.jsx(e.Fragment,{children:t.category!==r&&e.jsx("option",{value:r,children:r})}))]})]}),e.jsxs("div",{className:"flex flex-col   md:col-span-1 col-span-2",children:[e.jsx("label",{htmlFor:"title",className:"py-2 text-white",children:"Language"}),a.language&&e.jsx("small",{className:"text-red-600",children:a.language}),e.jsxs("select",{className:"bg-[#251c32] text-white border-0 rounded-md",name:"language",value:t.language,onChange:l,id:"",children:[t.language&&e.jsx("option",{value:t.language,children:t.language}),L.map(r=>e.jsx(e.Fragment,{children:t.language!==r&&e.jsx("option",{value:r,children:r})}))]})]}),e.jsxs("div",{className:"flex flex-col col-span-2",children:[e.jsx("label",{htmlFor:"title",className:"py-2 text-white",children:"cover image"}),a.coverIMG&&e.jsx("small",{className:"text-red-600",children:a.coverIMG}),e.jsx("input",{className:"bg-[#251c32] text-white border-0 rounded-md ",type:"file",accept:"image/*",onChange:r=>{r.target.files&&o(r.target.files[0])}})]}),e.jsxs("div",{className:"col-span-2 w-full text-white",children:[e.jsx("label",{htmlFor:"description",children:"Description"}),a.description&&e.jsx("small",{className:"text-red-600",children:a.description}),e.jsx("textarea",{className:"w-full mt-4 rounded-md bg-[#251c32] border-0 py-2",rows:4,name:"description",value:t.description,onChange:l,id:""})]}),b?e.jsx(e.Fragment,{children:e.jsx("div",{className:"font-bold flex items-center justify-center text-white bg-primary rounded-lg",children:e.jsx(k,{})})}):e.jsx("button",{onClick:N,className:"font-bold text-white bg-primary rounded-lg",children:"SUBMIT"}),e.jsx("button",{onClick:()=>d(n),className:"font-bold text-white px-4 py-2 bg-[#3f3b3b] rounded-lg",children:"Reset"})]})})]})})}function se(){const[j,u]=c.useState(!1),[n,m]=c.useState(!1),[x,s]=c.useState(!1),[i,t]=c.useState([]),[d,a]=c.useState(""),[p,h]=c.useState({coverIMG:"",description:"",price:"",title:""});return c.useEffect(()=>{(async function(){try{const{data:o}=await I.get("/tutor/my_courses",{withCredentials:!0});t(o.courses)}catch(o){console.log(o)}})()},[x]),c.useEffect(()=>{d&&h(i.find(o=>o._id===d))},[d]),c.useEffect(()=>{p.title&&d&&m(!0)},[d,p.title]),e.jsxs(e.Fragment,{children:[e.jsx(Q,{initialstate:p,openModal:n,setOpenModal:m,setEditCourseId:a,setUpdated:s,setInitialState:h}),e.jsx(O,{openModal:j,setUpdated:s,setOpenModal:u}),e.jsx(K,{role:"TUTOR"}),e.jsxs("div",{className:"flex w-full flex-col pb-28 items-center bg-secondary",children:[e.jsx("h1",{className:"font-bold text-5xl text-white mt-10",children:"My Courses"}),e.jsxs("div",{className:"w-[80%] mt-3 flex justify-between",children:[e.jsx("div",{className:"flex items-center",children:e.jsxs(G,{to:"/",className:"font-bold text-white",children:[e.jsx(z,{className:"mb-1"})," Back"]})}),e.jsx("button",{onClick:()=>u(!0),className:"bg-primary px-5 py-2 rounded-md text-white font-bold",children:"Create Course"})]}),e.jsx("div",{className:"flex flex-wrap mt-10",children:i.map((o,v)=>e.jsx(J,{coverIMG:o.coverIMG,description:o.description,price:o.price,title:o.title,setUpdated:s,_id:o._id,setEditCourseId:a},v))})]}),e.jsx(U,{})]})}export{se as default};
