import{r as n,o as u,B as d,j as e,S as g,y as j}from"./index-jVhWPiF6.js";import{d as w,a as N}from"./Cancel-3UUaCYp5.js";function q({teacher:c,_id:i,teacherId:l,setIsUpdate:a,isUpdate:t}){const[s,x]=n.useState({id:"",teacherId:""}),[o,f]=n.useState("");n.useEffect(()=>{(async function(){if(s.id&&s.teacherId&&!t)try{const r=await u.post(`/student/acceptRequest/${s.id}`,{teacherId:s.teacherId},{withCredentials:!0});r&&(d.success(r.data.message),x({id:"",teacherId:""}),a(!0))}catch{d.error("Error")}})()},[s,a,t]),n.useEffect(()=>{(async function(){if(o&&!t)try{await u.delete(`/student/deleteRequest/${o}`,{withCredentials:!0})&&(a(!0),f(""),d("Request rejected!"))}catch{d.error("Error")}})()},[o,a,t]);const m=(r,p)=>{x({id:r,teacherId:p})},h=r=>{f(r)};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"bg-[#251231]  flex justify-between items-center rounded-2xl mt-3 p-4 w-[70%]",children:[e.jsxs("div",{className:"flex gap-5",children:[e.jsx("img",{src:c.profile?c.profile:"https://www.seekpng.com/png/detail/115-1150456_avatar-generic-avatar.png",className:"w-16 rounded-full border-2 border-violet-700",alt:""}),e.jsxs("div",{className:"",children:[e.jsx("h1",{className:"text-white font-bold text-3xl",children:c.name}),e.jsx("small",{className:"text-white ",children:c.bio})]})]}),e.jsxs("div",{className:"me-5 flex gap-2",children:[e.jsx("span",{onClick:()=>m(i,l),children:e.jsx(w,{fontSize:"large",className:"text-green-500 hover:text-green-700 cursor-pointer"})}),e.jsx("span",{onClick:()=>h(i),children:e.jsx(N,{fontSize:"large",className:"text-red-500 hover:text-red-700 cursor-pointer"})})]})]})})}function S(){const[c,i]=n.useState([]),[l,a]=n.useState(!1);return n.useEffect(()=>{(async function(){try{const t=await u.get("/student/requests",{withCredentials:!0});t&&(i(t.data.requests),a(!1))}catch(t){const s=t;d.error(s.message)}})()},[l]),e.jsxs(e.Fragment,{children:[e.jsx(g,{}),e.jsxs("div",{className:"flex flex-wrap md:px-10 w-full gap-10 p-4 bg-secondary md:pb-64 md:pt-10",children:[e.jsx(j,{}),e.jsxs("div",{className:"flex w-full max-w-[50rem] px-3 items-center min-h-28 flex-col pb-10 pt-5 bg-[#302343] ring-1 ring-[#4d2389] rounded-2xl",children:[e.jsx("h1",{className:"font-bold text-gray-400",children:"Requests"}),c.map((t,s)=>e.jsx(q,{status:t.status,teacherId:t.teacherId,teacher:t.teacher,_id:t._id,setIsUpdate:a,isUpdate:l},s))]})]})]})}export{S as default};
