import{r as n,o,B as u,j as e,S as g,y as j}from"./index-fkKHL6aS.js";import{d as w,a as N}from"./Cancel-c-RZjcPx.js";function q({teacher:c,_id:l,teacherId:d,setIsUpdate:a,isUpdate:t}){const[r,x]=n.useState({id:"",teacherId:""}),[i,f]=n.useState("");n.useEffect(()=>{(async function(){if(r.id&&r.teacherId&&!t)try{const s=await o.post(`/student/acceptRequest/${r.id}`,{teacherId:r.teacherId},{withCredentials:!0});s&&(u.success(s.data.message),x({id:"",teacherId:""}),a(!0))}catch(s){console.log(s)}})()},[r,a,t]),n.useEffect(()=>{(async function(){if(i&&!t)try{await o.delete(`/student/deleteRequest/${i}`,{withCredentials:!0})&&(a(!0),f(""),u("Request rejected!"))}catch(s){console.log(s)}})()},[i,a,t]);const m=(s,p)=>{x({id:s,teacherId:p})},h=s=>{f(s)};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"bg-[#251231]  flex justify-between items-center rounded-2xl mt-3 p-4 w-[70%]",children:[e.jsxs("div",{className:"flex gap-5",children:[e.jsx("img",{src:c.profile?c.profile:"https://www.seekpng.com/png/detail/115-1150456_avatar-generic-avatar.png",className:"w-16 rounded-full border-2 border-violet-700",alt:""}),e.jsxs("div",{className:"",children:[e.jsx("h1",{className:"text-white font-bold text-3xl",children:c.name}),e.jsx("small",{className:"text-white ",children:c.bio})]})]}),e.jsxs("div",{className:"me-5 flex gap-2",children:[e.jsx("span",{onClick:()=>m(l,d),children:e.jsx(w,{fontSize:"large",className:"text-green-500 hover:text-green-700 cursor-pointer"})}),e.jsx("span",{onClick:()=>h(l),children:e.jsx(N,{fontSize:"large",className:"text-red-500 hover:text-red-700 cursor-pointer"})})]})]})})}function S(){const[c,l]=n.useState([]),[d,a]=n.useState(!1);return n.useEffect(()=>{(async function(){try{const t=await o.get("/student/requests",{withCredentials:!0});t&&(l(t.data.requests),a(!1))}catch(t){const r=t;u.error(r.message)}})()},[d]),e.jsxs(e.Fragment,{children:[e.jsx(g,{}),e.jsxs("div",{className:"flex flex-wrap md:px-10 w-full gap-10 p-4 bg-secondary md:pb-64 md:pt-10",children:[e.jsx(j,{}),e.jsxs("div",{className:"flex w-full max-w-[50rem] px-3 items-center min-h-28 flex-col pb-10 pt-5 bg-[#302343] ring-1 ring-[#4d2389] rounded-2xl",children:[e.jsx("h1",{className:"font-bold text-gray-400",children:"Requests"}),c.map((t,r)=>e.jsx(q,{status:t.status,teacherId:t.teacherId,teacher:t.teacher,_id:t._id,setIsUpdate:a,isUpdate:d},r))]})]})]})}export{S as default};
