import{r as n,o as f,B as d,j as e,z as t,K as j,L as N,ar as y}from"./index-jVhWPiF6.js";import{N as b}from"./NavBar-VvQwKKmC.js";import{d as S}from"./ChevronLeft-b0aZY8_Y.js";import{d as k}from"./Search-MkWc-H1k.js";import{d as v}from"./utilityFuctions-ouM6L3FC.js";import"./Cancel-3UUaCYp5.js";import"./Paper-nn5JuHjW.js";function B({studentData:u,blockId:i,setBlockId:l,unblockId:o,setunBlockId:c}){const m=s=>{j.fire({title:"Are you sure?",text:"are you sure want to block",icon:"question",showCancelButton:!0,confirmButtonText:"Yes Block!"}).then(r=>{r.isConfirmed&&l(s)})},x=s=>{j.fire({title:"Are you sure?",text:"are you sure want to unblock",icon:"question",showCancelButton:!0,confirmButtonText:"Yes Unblock!"}).then(r=>{r.isConfirmed&&c(s)})};return n.useEffect(()=>{(async function(){if(i)try{(await f.patch(`/admin/user-block/${i}`,{},{withCredentials:!0})).data.success&&(l(""),d.success("User Blocked!"))}catch{d.error("Error")}})()},[i,l]),n.useEffect(()=>{(async function(){if(o)try{(await f.patch(`/admin/user-unblock/${o}`,{},{withCredentials:!0})).data.success&&(c(""),d.success("User Unblocked!"))}catch{d.error("Error")}})()},[o,c]),e.jsx("div",{className:"overflow-x-auto mytable w-full md:w-[80%] mt-4",children:e.jsxs(t,{children:[e.jsxs(t.Head,{children:[e.jsx(t.HeadCell,{children:"SL No"}),e.jsx(t.HeadCell,{children:"Name"}),e.jsx(t.HeadCell,{children:"Class"}),e.jsx(t.HeadCell,{children:"Email"}),e.jsx(t.HeadCell,{children:"Intrests"}),e.jsx(t.HeadCell,{children:"Status"}),e.jsx(t.HeadCell,{children:e.jsx("span",{className:"sr-only",children:"Block/unblock"})})]}),e.jsx(t.Body,{className:"divide-y",children:u.length>0&&u.map((s,r)=>e.jsx(e.Fragment,{children:e.jsxs(t.Row,{className:"bg-white dark:border-gray-700 dark:bg-gray-800",children:[e.jsx(t.Cell,{className:"whitespace-nowrap font-medium text-gray-900 dark:text-white",children:r+1}),e.jsx(t.Cell,{children:s.name}),e.jsx(t.Cell,{children:s.standard}),e.jsx(t.Cell,{children:s.user.email}),e.jsx(t.Cell,{children:s.intrests.map(h=>e.jsxs("span",{children:[h,", "]}))}),e.jsx(t.Cell,{children:s.user.status?e.jsx("span",{className:"text-green-500 font-bold",children:"active"}):e.jsx("span",{className:"text-red-500 font-bold",children:"Blocked"})}),e.jsx(t.Cell,{children:s.user.status?e.jsx("span",{onClick:()=>m(s.userID),className:"font-medium  cursor-pointer rounded-md bg-red-500 px-5 py-2 text-white",children:"BLOCK"}):e.jsx("span",{onClick:()=>x(s.userID),className:"font-medium  cursor-pointer rounded-md bg-green-500 px-3 py-2 text-white",children:"UNBLOCK"})})]})}))})]})})}function L(){const[u,i]=n.useState([]),[l,o]=n.useState(""),[c,m]=n.useState(""),[x,s]=n.useState(""),[r,h]=n.useState(1),[p,w]=n.useState(0),C=a=>h(a),g=v(a=>{s(a)},500);return n.useEffect(()=>{(async function(){try{const a=await f.get(`/admin/students?search=${x}&&page=${r}`,{withCredentials:!0});i(a.data.students),w(a.data.count)}catch{d.error("Error")}})()},[l,c,x,r]),e.jsxs(e.Fragment,{children:[e.jsx(b,{role:"ADMIN"}),e.jsxs("div",{className:"flex flex-col items-center md:p-10 p-4 w-full h-[100vh] bg-secondary",children:[e.jsx("h1",{className:"font-bold text-white text-4xl",children:"MANAGE STUDENTS"}),e.jsxs("div",{className:"flex flex-wrap items-center justify-between mt-10 w-full md:w-[80%]",children:[e.jsxs(N,{to:"/",className:"font-bold text-white",children:[e.jsx(S,{className:"mb-1"})," Back"]}),e.jsxs("div",{className:"flex justify-center items-center",children:[e.jsx("input",{onChange:a=>g(a.target.value),className:"h-8 rounded-lg ",type:"text"}),e.jsx(k,{fontSize:"large",className:"text-white"})]})]}),e.jsx(B,{blockId:l,setBlockId:o,setunBlockId:m,studentData:u,unblockId:c},""),e.jsx("div",{className:"flex mypage overflow-x-auto w-[80%] sm:justify-end",children:e.jsx(y,{currentPage:r,totalPages:p,onPageChange:C})})]})]})}export{L as default};
