import{j as e,c as H,d as B,r as d,z as V,B as z,A as S,n as G,v as x,D as J,e as R,E as T,F as q}from"./index-4mQrzorV.js";import{P as K}from"./ProfileCard-Wxa9rfiL.js";function Q({val:i,id:r,setIntrests:n,setSubmit:s,intrests:u}){const m=o=>{n(u.filter(c=>c.id!=o)),s(!0)};return e.jsxs("div",{className:"bg-[#4b277b] rounded-full flex justify-center items-center text-gray-300 gap-2 py-1 px-4",children:[i," ",e.jsx("span",{className:"font-bold text-white cursor-pointer",onClick:()=>m(r),children:"x"})]})}function W({val:i,id:r,setSubjects:n,subjects:s,setSubmit:u}){const m=o=>{n(s.filter(c=>c.id!=o)),u(!0)};return e.jsxs("div",{className:"bg-[#4b277b] rounded-full flex justify-center items-center text-gray-300 gap-2 py-1 px-4",children:[i," ",e.jsx("span",{className:"font-bold text-white cursor-pointer",onClick:()=>m(r),children:"x"})]})}function X({submit:i,setSubmit:r}){const n=H(),{profile:s,isLoading:u,isError:m,isSuccess:o,errorMessage:c}=B(t=>t.userProfile),E=s!=null&&s.intrests?s==null?void 0:s.intrests:[],j=[];for(let t=0;t<E.length;t++)j.push({id:t,value:E[t]});const C=s!=null&&s.subjects?s==null?void 0:s.subjects:[],F=[];for(let t=0;t<C.length;t++)F.push({id:t,value:C[t]});const[b,P]=d.useState(""),[p,_]=d.useState(j||[]),[v,D]=d.useState(""),[f,L]=d.useState(F),[k,N]=d.useState(!1),M={name:s?s.name:"",phone:s?JSON.stringify(s.phone):"",dob:s?s.dob:"",gender:s?s.gender:"",standard:s?s.standard:"",preffered_language:s?s.preffered_language:"",intrests:s?s.intrests:[],subjects:s?s.subjects:[]},[l,w]=d.useState(M),[a,O]=d.useState({name:"",phone:"",dob:"",gender:"",class:"",preffered_language:"",intrests:"",subjects:""}),A=t=>{const{name:h,value:y}=t.target;w({...l,[h]:y}),r(!0)},g=t=>{const{name:h,value:y}=t.currentTarget;w({...l,[h]:y}),r(!0)},I=t=>{t.preventDefault(),b?(_([...p,{id:p.length+1,value:b}]),P(""),r(!0)):v&&(L([...f,{id:f.length+1,value:v}]),D(""),r(!0))},U=t=>{t.preventDefault(),(p.length>=0||f.length>=0)&&w({...l,intrests:p.map(h=>h.value),subjects:f.map(h=>h.value)}),O({...a,name:x("name",l.name),phone:x("phone",l.phone),gender:x("gender",l.gender),class:x("class",l.standard),dob:x("dob",l.dob),preffered_language:x("preffered_language",l.preffered_language),intrests:x("intrests",l.intrests),subjects:x("subjects",l.subjects)}),N(!0)};return d.useEffect(()=>{k&&i&&!a.class&&!a.dob&&!a.gender&&!a.intrests&&!a.name&&!a.phone&&!a.preffered_language&&!a.subjects&&n(V(l))},[l,k,a,i,n]),d.useEffect(()=>{m&&(z.error(c==null?void 0:c.message),n(S())),o&&N(!1)},[m,c,N,o,n]),u?e.jsx(G,{}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-col  rounded-lg ring-1 p-3 pb-10 ring-[#4d2389] items-center mt-6 bg-[#302343]",children:[e.jsx("h1",{className:"text-white text-4xl text-center font-bold my-4",children:"Complete your profile"}),e.jsx("div",{className:"w-full bg-[#552794] rounded-full h-[0.2px] mb-2"}),e.jsxs("div",{className:"grid grid-cols-3 w-full px-3 gap-3",children:[e.jsxs("div",{className:"md:col-span-1 text-white space-y-1 w-full col-span-3",children:[e.jsx("label",{htmlFor:"text",children:"Name"}),a.name&&e.jsx("small",{className:"text-red-600 ml-2",children:a.name}),e.jsx("input",{className:"bg-secondary w-full rounded-md text-white",type:"text",name:"name",placeholder:"Enter your Name ",value:l.name,onChange:A})]}),e.jsxs("div",{className:"md:col-span-1 text-white space-y-1 w-full col-span-3",children:[e.jsx("label",{htmlFor:"text",children:"Phone"}),a.phone&&e.jsx("small",{className:"text-red-600 ml-2",children:a.phone}),e.jsx("input",{className:"bg-secondary w-full rounded-md text-white",placeholder:"Enter your phone ",type:"number",name:"phone",value:l.phone,onChange:A})]}),e.jsxs("div",{className:"md:col-span-1 text-white space-y-1 w-full col-span-3",children:[e.jsx("label",{htmlFor:"date",children:"Date of Birth"}),a.dob&&e.jsx("small",{className:"text-red-600 ml-2",children:a.dob}),e.jsx("input",{className:"bg-secondary w-full rounded-md text-white",type:"date",name:"dob",value:l.dob,onChange:g})]}),e.jsxs("div",{className:"md:col-span-1 text-white space-y-1 w-full col-span-3",children:[e.jsx("label",{htmlFor:"date",children:"Geneder"}),a.gender&&e.jsx("small",{className:"text-red-600 ml-2",children:a.gender}),e.jsxs("select",{name:"gender",className:"bg-secondary w-full rounded-md text-white",onChange:g,children:[l.gender?e.jsxs("option",{value:l.gender,children:[" ",l.gender]}):e.jsx("option",{value:""}),e.jsx("option",{value:"male",children:"Male"}),e.jsx("option",{value:"femail",children:"Female"}),e.jsx("option",{value:"other ",children:"Other"})]})]}),e.jsxs("div",{className:"md:col-span-1 text-white space-y-1 w-full col-span-3",children:[e.jsx("label",{htmlFor:"date",children:"Class"}),a.class&&e.jsx("small",{className:"text-red-600 ml-2",children:a.class}),e.jsxs("select",{name:"standard",className:"bg-secondary w-full rounded-md text-white",onChange:g,children:[l.standard?e.jsx("option",{value:l.standard,children:l.standard}):e.jsx("option",{value:""}),e.jsx("option",{value:"LP",children:"LP"}),e.jsx("option",{value:"UP",children:"UP"}),e.jsx("option",{value:"high school",children:"High school"}),e.jsx("option",{value:"higher secondary",children:"Higher Secondary"}),e.jsx("option",{value:"degree",children:"Degree"})]})]}),e.jsxs("div",{className:"md:col-span-1 text-white space-y-1 w-full col-span-3",children:[e.jsx("label",{htmlFor:"date",children:"Preffered Language"}),a.preffered_language&&e.jsx("small",{className:"text-red-600 ml-2",children:a.preffered_language}),e.jsxs("select",{name:"preffered_language",className:"bg-secondary w-full rounded-md text-white",onChange:g,children:[l.preffered_language?e.jsx("option",{value:l.preffered_language,children:l.preffered_language}):e.jsx("option",{value:""}),e.jsx("option",{value:"english",children:"English"}),e.jsx("option",{value:"malayalam",children:"Malayalam"}),e.jsx("option",{value:"hindi",children:"Hindi"})]})]}),e.jsxs("div",{className:"md:col-span-1 text-white space-y-1 w-full col-span-3",children:[e.jsx("label",{htmlFor:"text",children:"Intrests"}),a.intrests&&e.jsx("small",{className:"text-red-600 ml-2",children:a.intrests}),e.jsx("div",{className:"flex flex-wrap gap-3 p-1",children:p.map(t=>e.jsx(Q,{intrests:p,id:t.id,setIntrests:_,val:t.value,setSubmit:r},t.id))}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{value:b,onChange:t=>P(t.target.value),className:"bg-secondary  w-full rounded-md text-white",type:"text"}),e.jsx("button",{onClick:I,className:"absolute right-5 top-2 bg-black px-3 rounded-md ",children:"ADD"})]})]}),e.jsxs("div",{className:"md:col-span-1 relative text-white space-y-1 w-full col-span-3",children:[e.jsx("label",{htmlFor:"text",children:"Subjects"}),a.subjects&&e.jsx("small",{className:"text-red-600 ml-2",children:a.subjects}),e.jsx("div",{className:"flex flex-wrap gap-3 p-1",children:f.map(t=>e.jsx(W,{subjects:f,id:t.id,setSubjects:L,val:t.value,setSubmit:r}))}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{value:v,onChange:t=>D(t.target.value),className:"bg-secondary  w-full rounded-md text-white",type:"text"}),e.jsx("button",{onClick:I,className:"absolute right-5 top-2 bg-black px-3 rounded-md ",children:"ADD"})]})]})]}),i&&e.jsx("button",{onClick:U,className:"bg-primary mt-6 p-2 w-[98%] rounded-md text-gray-200 font-bold",children:"SAVE CHANGES"})]})})}function $(){const[i,r]=d.useState(!1),n=H(),{isLoading:s,isError:u,errorMessage:m,isSuccess:o}=B(c=>c.userProfile);return d.useEffect(()=>{n(J())},[n]),d.useEffect(()=>{u&&n(S())},[m,u,n]),d.useEffect(()=>{o&&(n(S()),r(!1))},[o,n]),e.jsxs(e.Fragment,{children:[e.jsx(R,{}),e.jsxs("div",{className:"flex flex-wrap md:p-10 p-4 gap-10 bg-secondary",children:[e.jsx(T,{}),e.jsx("div",{className:"flex w-full max-w-[50rem] flex-col",children:s?e.jsx(G,{}):e.jsxs(e.Fragment,{children:[e.jsx(K,{}),e.jsx(X,{submit:i,setSubmit:r})]})})]}),e.jsx(q,{})]})}export{$ as default};
