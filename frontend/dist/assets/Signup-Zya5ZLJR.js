import{i as U,k as q,j as e,r as t,M as C,m as J,n as K,o as O,B as R,a as Q,u as W,b as X,s as Y,e as T,f as Z,L as ee,v as S}from"./index-2-yNbS5w.js";import{G as se}from"./GoogleAuth-VnXN7B8a.js";var _={},ae=q;Object.defineProperty(_,"__esModule",{value:!0});var z=_.default=void 0,te=ae(U()),re=e;z=_.default=(0,te.default)((0,re.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"RemoveRedEye");var M={},ne=q;Object.defineProperty(M,"__esModule",{value:!0});var A=M.default=void 0,le=ne(U()),oe=e;A=M.default=(0,le.default)((0,oe.jsx)("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7M2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2m4.31-.78 3.15 3.15.02-.16c0-1.66-1.34-3-3-3z"}),"VisibilityOff");function ie({setOpenModal:h,openModal:i,email:m,isSubmit:E,setFormSubmit:f}){const[l,u]=t.useState(""),[v,p]=t.useState(""),[c,j]=t.useState(60);let w;t.useEffect(()=>(c>0&&E&&(w=setInterval(()=>{j(c-1)},1e3)),()=>{clearInterval(w)}));const b=x=>{x.preventDefault(),l.trim().length>0&&async function(){var d;try{const r=await O.post("/verify-otp",{email:m,otp:l});r.data.success?(R(r.data.message),p(""),h(!1),f(!0)):p(r.data.message)}catch(r){const o=r,a=(d=o==null?void 0:o.response)==null?void 0:d.data;p(a.message)}}()},s=x=>{x.preventDefault(),c===0&&async function(){var d;try{const r=await O.post("/verify-email",{email:m});j(60),r.data.success&&R(r.data.message)}catch(r){const o=r,a=(d=o==null?void 0:o.response)==null?void 0:d.data;p(a.message)}}()};return e.jsx(e.Fragment,{children:e.jsxs(C,{show:i,size:"sm",onClose:()=>h(!1),popup:!0,children:[e.jsx(C.Header,{}),e.jsx(C.Body,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-xl text-center font-medium text-gray-900 dark:text-white",children:["Enter the OTP sent to ",m.split("@")[0].slice(0,4),"********@",m.split("@")[1]]}),e.jsxs("div",{children:[v&&e.jsx("div",{className:"w-full bg-red-100 text-center rounded-sm",children:e.jsxs("small",{className:"py- text-red-600",children:[v," "]})}),e.jsx("div",{className:"mb-2 block",children:e.jsx(J,{htmlFor:"email",value:"Enter OTP"})}),e.jsx(K,{value:l,onChange:x=>u(x.target.value),id:"number",placeholder:"eg:456436"})]}),e.jsx("button",{onClick:b,className:"bg-primary w-full py-2 rounded-md text-white font-medium",children:"Submit"}),e.jsx("div",{children:c>0?e.jsxs("span",{className:"font-semibold text-gray-600",children:["Resend OTP within"," ",e.jsxs("span",{className:"font-bold text-blue-500",children:[c,"s"]})]}):e.jsx("span",{className:"text-blue-500 font-semibold cursor-pointer",onClick:s,children:"Resend OTP"})})]})})]})})}const me="/assets/Signup-jSF_Rqp1.svg";function ue({role:h}){const i=Q(),m=W(),{isLoading:E,isError:f,user:l,errorMessage:u,isSuccess:v}=X(n=>n.auth),[p,c]=t.useState(!1),[j,w]=t.useState(!1),b=()=>{w(n=>!n)},[s,x]=t.useState({name:"",email:"",phone:"",password:"",role:h}),[d,r]=t.useState(""),o=n=>{r(n.target.value)},[a,F]=t.useState({name:"",email:"",password:"",phone:""}),[k,D]=t.useState(""),[G,P]=t.useState(!1),[$,I]=t.useState(!1),[L,B]=t.useState(!1),N=n=>{const{name:y,value:g}=n.target;x({...s,[y]:g})},V=n=>{n.preventDefault(),F({...a,name:S("name",s.name),email:S("email",s.email),phone:S("phone",s.phone),password:S("password",s.password)}),a.password===""&&d!==s.password&&F({...a,password:"password not matching"}),B(!0)};return t.useEffect(()=>{!a.name&&!a.email&&!a.password&&!a.phone&&s.email.length>0&&s.password.length>0&&s.phone.length>0&&s.name.length>0&&L&&async function(){var n;try{(await O.post("/verify-email",{email:s.email})).data.success&&(I(!0),D(""),P(!0))}catch(y){const g=y,H=((n=g==null?void 0:g.response)==null?void 0:n.data).message;I(!1),D(H),P(!1)}}()},[a,s,L]),t.useEffect(()=>{p&&(i(Y(s)),i(T())),c(!1)},[i,s,p]),t.useEffect(()=>{v&&((l==null?void 0:l.role)==="STUDENT"?m("/student"):(l==null?void 0:l.role)==="TUTOR"&&m("/tutor"),i(T())),(f&&u.status>=500||u.status===404)&&(R.error(u.message),i(T()))},[v,m,f,l,i,u]),E?e.jsx(Z,{}):e.jsxs(e.Fragment,{children:[e.jsx(ie,{openModal:G,setOpenModal:P,email:s.email,isSubmit:$,setFormSubmit:c}),e.jsx("div",{className:"flex justify-center items-center bg-gradient-to-r from-custom-gradient-start to-custom-gradient-end h-[100vh]  md:px-72 px-4 w-full",children:e.jsxs("div",{className:"w-[100%] relative flex justify-between bg-white rounded-3xl",children:[e.jsx("div",{className:"bg-primary w-72 left-20 hidden md:inline-flex rounded-3xl"}),e.jsxs("div",{className:"flex flex-col items-center w-[100%]",children:[e.jsx("h1",{className:"text-primary font-black text-5xl mt-9 mb-2",children:"SIGNUP"}),e.jsx(se,{method:"Sign Up",role:h}),e.jsxs("form",{onSubmit:V,className:"flex flex-col items-start w-[70%]",children:[k&&e.jsx("small",{className:"text-red-600 rounded-sm mt-2 bg-red-100 w-[100%] text-center",children:k}),f&&e.jsx("small",{className:"text-red-600 rounded-sm mt-2 bg-red-100 w-[100%] text-center",children:u.message}),e.jsx("label",{htmlFor:"name",className:"text-primary font-medium mt-2",children:"Name"}),e.jsx("input",{type:"text",id:"name",name:"name",placeholder:"Enter your Name",className:"w-[100%] text-xs h-8 rounded-md",value:s.name,onChange:N}),a.name&&e.jsx("small",{className:"text-red-700",children:a.name}),e.jsxs("div",{className:"grid grid-cols-2 justify-between w-[100%] gap-3 mt-2",children:[e.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[e.jsx("label",{htmlFor:"name",className:"text-primary font-medium mt-2",children:"Email"}),e.jsx("input",{name:"email",type:"email",id:"name",placeholder:"Enter your Email",className:"w-[100%] text-xs h-8 rounded-md",value:s.email,onChange:N}),a.email&&e.jsx("small",{className:"text-red-700",children:a.email})]}),e.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[e.jsx("label",{htmlFor:"name",className:"text-primary font-medium mt-2",children:"Phone"}),e.jsx("input",{type:"number",id:"name",name:"phone",onChange:N,value:s.phone,placeholder:"Enter your Phone Number",className:"w-[100%] text-xs h-8 rounded-md"}),a.phone&&e.jsx("small",{className:"text-red-700",children:a.phone})]}),e.jsxs("div",{className:"col-span-2 sm:col-span-1 relative",children:[e.jsx("label",{htmlFor:"name",className:"text-primary font-medium mt-2",children:"Password"}),e.jsx("input",{type:j?"text":"password",id:"name",name:"password",onChange:N,value:s.password,placeholder:"Enter your password",className:"w-[100%] text-xs h-8 rounded-md"}),a.password&&e.jsx("small",{className:"text-red-700",children:a.password}),j?e.jsx(z,{onClick:b,className:"absolute right-3 top-8 cursor-pointer",sx:{fontSize:15}}):e.jsx(A,{onClick:b,className:"absolute right-3 top-8 cursor-pointer",sx:{fontSize:15}})]}),e.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[e.jsx("label",{htmlFor:"name",className:"text-primary font-medium mt-2",children:"Confirm Password"}),e.jsx("input",{type:"password",id:"name",value:d,onChange:o,placeholder:"Confirm Password",className:"w-[100%] text-xs h-8 rounded-md"})]}),e.jsx("div",{className:"col-span-2 sm:col-span-1",children:e.jsx("button",{className:"bg-primary py-2 w-[100%] rounded-md text-white text-base font-medium",children:"SUBMIT"})})]}),e.jsx(ee,{to:"/login",className:"text-blue-500 text-sm mt-1 mb-5",children:"Already have account? login"})]})]}),e.jsx("img",{className:"absolute hidden top-0 left-0 md:inline-flex",src:me,alt:""})]})})]})}export{ue as S};
