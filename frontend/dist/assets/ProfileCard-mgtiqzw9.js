import{i as U,k as z,j as d,r as f,Z as m,M,o as X,B as W,v as H,a as T,b as $,E as q,G,a1 as Q,a2 as V}from"./index-tJXQ2hjm.js";var Y={},Z=z;Object.defineProperty(Y,"__esModule",{value:!0});var O=Y.default=void 0,J=Z(U()),ee=d;O=Y.default=(0,J.default)((0,ee.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit");const _={x:0,y:0,width:0,height:0,unit:"px"},N=(h,e,t)=>Math.min(Math.max(h,e),t),te=(...h)=>h.filter(e=>e&&typeof e=="string").join(" "),F=(h,e)=>h===e||h.width===e.width&&h.height===e.height&&h.x===e.x&&h.y===e.y&&h.unit===e.unit;function ne(h,e,t,r){const n=D(h,t,r);return h.width&&(n.height=n.width/e),h.height&&(n.width=n.height*e),n.y+n.height>r&&(n.height=r-n.y,n.width=n.height*e),n.x+n.width>t&&(n.width=t-n.x,n.height=n.width/e),h.unit==="%"?S(n,t,r):n}function se(h,e,t){const r=D(h,e,t);return r.x=(e-r.width)/2,r.y=(t-r.height)/2,h.unit==="%"?S(r,e,t):r}function S(h,e,t){return h.unit==="%"?{..._,...h,unit:"%"}:{unit:"%",x:h.x?h.x/e*100:0,y:h.y?h.y/t*100:0,width:h.width?h.width/e*100:0,height:h.height?h.height/t*100:0}}function D(h,e,t){return h.unit?h.unit==="px"?{..._,...h,unit:"px"}:{unit:"px",x:h.x?h.x*e/100:0,y:h.y?h.y*t/100:0,width:h.width?h.width*e/100:0,height:h.height?h.height*t/100:0}:{..._,...h,unit:"px"}}function K(h,e,t,r,n,s=0,o=0,l=r,i=n){const a={...h};let p=Math.min(s,r),u=Math.min(o,n),w=Math.min(l,r),c=Math.min(i,n);e&&(e>1?(p=o?o*e:p,u=p/e,w=l*e):(u=s?s/e:u,p=u*e,c=i/e)),a.y<0&&(a.height=Math.max(a.height+a.y,u),a.y=0),a.x<0&&(a.width=Math.max(a.width+a.x,p),a.x=0);const g=r-(a.x+a.width);g<0&&(a.x=Math.min(a.x,r-p),a.width+=g);const x=n-(a.y+a.height);if(x<0&&(a.y=Math.min(a.y,n-u),a.height+=x),a.width<p&&((t==="sw"||t=="nw")&&(a.x-=p-a.width),a.width=p),a.height<u&&((t==="nw"||t=="ne")&&(a.y-=u-a.height),a.height=u),a.width>w&&((t==="sw"||t=="nw")&&(a.x-=w-a.width),a.width=w),a.height>c&&((t==="nw"||t=="ne")&&(a.y-=c-a.height),a.height=c),e){const v=a.width/a.height;if(v<e){const y=Math.max(a.width/e,u);(t==="nw"||t=="ne")&&(a.y-=y-a.height),a.height=y}else if(v>e){const y=Math.max(a.height*e,p);(t==="sw"||t=="nw")&&(a.x-=y-a.width),a.width=y}}return a}function re(h,e,t,r){const n={...h};return e==="ArrowLeft"?r==="nw"?(n.x-=t,n.y-=t,n.width+=t,n.height+=t):r==="w"?(n.x-=t,n.width+=t):r==="sw"?(n.x-=t,n.width+=t,n.height+=t):r==="ne"?(n.y+=t,n.width-=t,n.height-=t):r==="e"?n.width-=t:r==="se"&&(n.width-=t,n.height-=t):e==="ArrowRight"&&(r==="nw"?(n.x+=t,n.y+=t,n.width-=t,n.height-=t):r==="w"?(n.x+=t,n.width-=t):r==="sw"?(n.x+=t,n.width-=t,n.height-=t):r==="ne"?(n.y-=t,n.width+=t,n.height+=t):r==="e"?n.width+=t:r==="se"&&(n.width+=t,n.height+=t)),e==="ArrowUp"?r==="nw"?(n.x-=t,n.y-=t,n.width+=t,n.height+=t):r==="n"?(n.y-=t,n.height+=t):r==="ne"?(n.y-=t,n.width+=t,n.height+=t):r==="sw"?(n.x+=t,n.width-=t,n.height-=t):r==="s"?n.height-=t:r==="se"&&(n.width-=t,n.height-=t):e==="ArrowDown"&&(r==="nw"?(n.x+=t,n.y+=t,n.width-=t,n.height-=t):r==="n"?(n.y+=t,n.height-=t):r==="ne"?(n.y+=t,n.width-=t,n.height-=t):r==="sw"?(n.x-=t,n.width+=t,n.height+=t):r==="s"?n.height+=t:r==="se"&&(n.width+=t,n.height+=t)),n}const E={capture:!0,passive:!1};let ae=0;const R=class b extends f.PureComponent{constructor(){super(...arguments),this.docMoveBound=!1,this.mouseDownOnCrop=!1,this.dragStarted=!1,this.evData={startClientX:0,startClientY:0,startCropX:0,startCropY:0,clientX:0,clientY:0,isResize:!0},this.componentRef=f.createRef(),this.mediaRef=f.createRef(),this.initChangeCalled=!1,this.instanceId=`rc-${ae++}`,this.state={cropIsActive:!1,newCropIsBeingDrawn:!1},this.onCropPointerDown=e=>{const{crop:t,disabled:r}=this.props,n=this.getBox();if(!t)return;const s=D(t,n.width,n.height);if(r)return;e.cancelable&&e.preventDefault(),this.bindDocMove(),this.componentRef.current.focus({preventScroll:!0});const o=e.target.dataset.ord,l=!!o;let i=e.clientX,a=e.clientY,p=s.x,u=s.y;if(o){const w=e.clientX-n.x,c=e.clientY-n.y;let g=0,x=0;o==="ne"||o=="e"?(g=w-(s.x+s.width),x=c-s.y,p=s.x,u=s.y+s.height):o==="se"||o==="s"?(g=w-(s.x+s.width),x=c-(s.y+s.height),p=s.x,u=s.y):o==="sw"||o=="w"?(g=w-s.x,x=c-(s.y+s.height),p=s.x+s.width,u=s.y):(o==="nw"||o=="n")&&(g=w-s.x,x=c-s.y,p=s.x+s.width,u=s.y+s.height),i=p+n.x+g,a=u+n.y+x}this.evData={startClientX:i,startClientY:a,startCropX:p,startCropY:u,clientX:e.clientX,clientY:e.clientY,isResize:l,ord:o},this.mouseDownOnCrop=!0,this.setState({cropIsActive:!0})},this.onComponentPointerDown=e=>{const{crop:t,disabled:r,locked:n,keepSelection:s,onChange:o}=this.props,l=this.getBox();if(r||n||s&&t)return;e.cancelable&&e.preventDefault(),this.bindDocMove(),this.componentRef.current.focus({preventScroll:!0});const i=e.clientX-l.x,a=e.clientY-l.y,p={unit:"px",x:i,y:a,width:0,height:0};this.evData={startClientX:e.clientX,startClientY:e.clientY,startCropX:i,startCropY:a,clientX:e.clientX,clientY:e.clientY,isResize:!0},this.mouseDownOnCrop=!0,o(D(p,l.width,l.height),S(p,l.width,l.height)),this.setState({cropIsActive:!0,newCropIsBeingDrawn:!0})},this.onDocPointerMove=e=>{const{crop:t,disabled:r,onChange:n,onDragStart:s}=this.props,o=this.getBox();if(r||!t||!this.mouseDownOnCrop)return;e.cancelable&&e.preventDefault(),this.dragStarted||(this.dragStarted=!0,s&&s(e));const{evData:l}=this;l.clientX=e.clientX,l.clientY=e.clientY;let i;l.isResize?i=this.resizeCrop():i=this.dragCrop(),F(t,i)||n(D(i,o.width,o.height),S(i,o.width,o.height))},this.onComponentKeyDown=e=>{const{crop:t,disabled:r,onChange:n,onComplete:s}=this.props;if(r)return;const o=e.key;let l=!1;if(!t)return;const i=this.getBox(),a=this.makePixelCrop(i),p=(navigator.platform.match("Mac")?e.metaKey:e.ctrlKey)?b.nudgeStepLarge:e.shiftKey?b.nudgeStepMedium:b.nudgeStep;if(o==="ArrowLeft"?(a.x-=p,l=!0):o==="ArrowRight"?(a.x+=p,l=!0):o==="ArrowUp"?(a.y-=p,l=!0):o==="ArrowDown"&&(a.y+=p,l=!0),l){e.cancelable&&e.preventDefault(),a.x=N(a.x,0,i.width-a.width),a.y=N(a.y,0,i.height-a.height);const u=D(a,i.width,i.height),w=S(a,i.width,i.height);n(u,w),s&&s(u,w)}},this.onHandlerKeyDown=(e,t)=>{const{aspect:r=0,crop:n,disabled:s,minWidth:o=0,minHeight:l=0,maxWidth:i,maxHeight:a,onChange:p,onComplete:u}=this.props,w=this.getBox();if(s||!n)return;if(e.key==="ArrowUp"||e.key==="ArrowDown"||e.key==="ArrowLeft"||e.key==="ArrowRight")e.stopPropagation(),e.preventDefault();else return;const c=(navigator.platform.match("Mac")?e.metaKey:e.ctrlKey)?b.nudgeStepLarge:e.shiftKey?b.nudgeStepMedium:b.nudgeStep,g=D(n,w.width,w.height),x=re(g,e.key,c,t),v=K(x,r,t,w.width,w.height,o,l,i,a);if(!F(n,v)){const y=S(v,w.width,w.height);p(v,y),u&&u(v,y)}},this.onDocPointerDone=e=>{const{crop:t,disabled:r,onComplete:n,onDragEnd:s}=this.props,o=this.getBox();this.unbindDocMove(),!(r||!t)&&this.mouseDownOnCrop&&(this.mouseDownOnCrop=!1,this.dragStarted=!1,s&&s(e),n&&n(D(t,o.width,o.height),S(t,o.width,o.height)),this.setState({cropIsActive:!1,newCropIsBeingDrawn:!1}))},this.onDragFocus=()=>{var e;(e=this.componentRef.current)==null||e.scrollTo(0,0)}}get document(){return document}getBox(){const e=this.mediaRef.current;if(!e)return{x:0,y:0,width:0,height:0};const{x:t,y:r,width:n,height:s}=e.getBoundingClientRect();return{x:t,y:r,width:n,height:s}}componentDidUpdate(e){const{crop:t,onComplete:r}=this.props;if(r&&!e.crop&&t){const{width:n,height:s}=this.getBox();n&&s&&r(D(t,n,s),S(t,n,s))}}componentWillUnmount(){this.resizeObserver&&this.resizeObserver.disconnect()}bindDocMove(){this.docMoveBound||(this.document.addEventListener("pointermove",this.onDocPointerMove,E),this.document.addEventListener("pointerup",this.onDocPointerDone,E),this.document.addEventListener("pointercancel",this.onDocPointerDone,E),this.docMoveBound=!0)}unbindDocMove(){this.docMoveBound&&(this.document.removeEventListener("pointermove",this.onDocPointerMove,E),this.document.removeEventListener("pointerup",this.onDocPointerDone,E),this.document.removeEventListener("pointercancel",this.onDocPointerDone,E),this.docMoveBound=!1)}getCropStyle(){const{crop:e}=this.props;if(e)return{top:`${e.y}${e.unit}`,left:`${e.x}${e.unit}`,width:`${e.width}${e.unit}`,height:`${e.height}${e.unit}`}}dragCrop(){const{evData:e}=this,t=this.getBox(),r=this.makePixelCrop(t),n=e.clientX-e.startClientX,s=e.clientY-e.startClientY;return r.x=N(e.startCropX+n,0,t.width-r.width),r.y=N(e.startCropY+s,0,t.height-r.height),r}getPointRegion(e,t,r,n){const{evData:s}=this,o=s.clientX-e.x,l=s.clientY-e.y;let i;n&&t?i=t==="nw"||t==="n"||t==="ne":i=l<s.startCropY;let a;return r&&t?a=t==="nw"||t==="w"||t==="sw":a=o<s.startCropX,a?i?"nw":"sw":i?"ne":"se"}resolveMinDimensions(e,t,r=0,n=0){const s=Math.min(r,e.width),o=Math.min(n,e.height);return!t||!s&&!o?[s,o]:t>1?s?[s,s/t]:[o*t,o]:o?[o*t,o]:[s,s/t]}resizeCrop(){const{evData:e}=this,{aspect:t=0,maxWidth:r,maxHeight:n}=this.props,s=this.getBox(),[o,l]=this.resolveMinDimensions(s,t,this.props.minWidth,this.props.minHeight);let i=this.makePixelCrop(s);const a=this.getPointRegion(s,e.ord,o,l),p=e.ord||a;let u=e.clientX-e.startClientX,w=e.clientY-e.startClientY;(o&&p==="nw"||p==="w"||p==="sw")&&(u=Math.min(u,-o)),(l&&p==="nw"||p==="n"||p==="ne")&&(w=Math.min(w,-l));const c={unit:"px",x:0,y:0,width:0,height:0};a==="ne"?(c.x=e.startCropX,c.width=u,t?(c.height=c.width/t,c.y=e.startCropY-c.height):(c.height=Math.abs(w),c.y=e.startCropY-c.height)):a==="se"?(c.x=e.startCropX,c.y=e.startCropY,c.width=u,t?c.height=c.width/t:c.height=w):a==="sw"?(c.x=e.startCropX+u,c.y=e.startCropY,c.width=Math.abs(u),t?c.height=c.width/t:c.height=w):a==="nw"&&(c.x=e.startCropX+u,c.width=Math.abs(u),t?(c.height=c.width/t,c.y=e.startCropY-c.height):(c.height=Math.abs(w),c.y=e.startCropY+w));const g=K(c,t,a,s.width,s.height,o,l,r,n);return t||b.xyOrds.indexOf(p)>-1?i=g:b.xOrds.indexOf(p)>-1?(i.x=g.x,i.width=g.width):b.yOrds.indexOf(p)>-1&&(i.y=g.y,i.height=g.height),i.x=N(i.x,0,s.width-i.width),i.y=N(i.y,0,s.height-i.height),i}renderCropSelection(){const{ariaLabels:e=b.defaultProps.ariaLabels,disabled:t,locked:r,renderSelectionAddon:n,ruleOfThirds:s,crop:o}=this.props,l=this.getCropStyle();if(o)return m.createElement("div",{style:l,className:"ReactCrop__crop-selection",onPointerDown:this.onCropPointerDown,"aria-label":e.cropArea,tabIndex:0,onKeyDown:this.onComponentKeyDown,role:"group"},!t&&!r&&m.createElement("div",{className:"ReactCrop__drag-elements",onFocus:this.onDragFocus},m.createElement("div",{className:"ReactCrop__drag-bar ord-n","data-ord":"n"}),m.createElement("div",{className:"ReactCrop__drag-bar ord-e","data-ord":"e"}),m.createElement("div",{className:"ReactCrop__drag-bar ord-s","data-ord":"s"}),m.createElement("div",{className:"ReactCrop__drag-bar ord-w","data-ord":"w"}),m.createElement("div",{className:"ReactCrop__drag-handle ord-nw","data-ord":"nw",tabIndex:0,"aria-label":e.nwDragHandle,onKeyDown:i=>this.onHandlerKeyDown(i,"nw"),role:"button"}),m.createElement("div",{className:"ReactCrop__drag-handle ord-n","data-ord":"n",tabIndex:0,"aria-label":e.nDragHandle,onKeyDown:i=>this.onHandlerKeyDown(i,"n"),role:"button"}),m.createElement("div",{className:"ReactCrop__drag-handle ord-ne","data-ord":"ne",tabIndex:0,"aria-label":e.neDragHandle,onKeyDown:i=>this.onHandlerKeyDown(i,"ne"),role:"button"}),m.createElement("div",{className:"ReactCrop__drag-handle ord-e","data-ord":"e",tabIndex:0,"aria-label":e.eDragHandle,onKeyDown:i=>this.onHandlerKeyDown(i,"e"),role:"button"}),m.createElement("div",{className:"ReactCrop__drag-handle ord-se","data-ord":"se",tabIndex:0,"aria-label":e.seDragHandle,onKeyDown:i=>this.onHandlerKeyDown(i,"se"),role:"button"}),m.createElement("div",{className:"ReactCrop__drag-handle ord-s","data-ord":"s",tabIndex:0,"aria-label":e.sDragHandle,onKeyDown:i=>this.onHandlerKeyDown(i,"s"),role:"button"}),m.createElement("div",{className:"ReactCrop__drag-handle ord-sw","data-ord":"sw",tabIndex:0,"aria-label":e.swDragHandle,onKeyDown:i=>this.onHandlerKeyDown(i,"sw"),role:"button"}),m.createElement("div",{className:"ReactCrop__drag-handle ord-w","data-ord":"w",tabIndex:0,"aria-label":e.wDragHandle,onKeyDown:i=>this.onHandlerKeyDown(i,"w"),role:"button"})),n&&m.createElement("div",{className:"ReactCrop__selection-addon",onPointerDown:i=>i.stopPropagation()},n(this.state)),s&&m.createElement(m.Fragment,null,m.createElement("div",{className:"ReactCrop__rule-of-thirds-hz"}),m.createElement("div",{className:"ReactCrop__rule-of-thirds-vt"})))}makePixelCrop(e){const t={..._,...this.props.crop||{}};return D(t,e.width,e.height)}render(){const{aspect:e,children:t,circularCrop:r,className:n,crop:s,disabled:o,locked:l,style:i,ruleOfThirds:a}=this.props,{cropIsActive:p,newCropIsBeingDrawn:u}=this.state,w=s?this.renderCropSelection():null,c=te("ReactCrop",n,p&&"ReactCrop--active",o&&"ReactCrop--disabled",l&&"ReactCrop--locked",u&&"ReactCrop--new-crop",s&&e&&"ReactCrop--fixed-aspect",s&&r&&"ReactCrop--circular-crop",s&&a&&"ReactCrop--rule-of-thirds",!this.dragStarted&&s&&!s.width&&!s.height&&"ReactCrop--invisible-crop",r&&"ReactCrop--no-animate");return m.createElement("div",{ref:this.componentRef,className:c,style:i},m.createElement("div",{ref:this.mediaRef,className:"ReactCrop__child-wrapper",onPointerDown:this.onComponentPointerDown},t),s?m.createElement("svg",{className:"ReactCrop__crop-mask",width:"100%",height:"100%"},m.createElement("defs",null,m.createElement("mask",{id:`hole-${this.instanceId}`},m.createElement("rect",{width:"100%",height:"100%",fill:"white"}),r?m.createElement("ellipse",{cx:`${s.x+s.width/2}${s.unit}`,cy:`${s.y+s.height/2}${s.unit}`,rx:`${s.width/2}${s.unit}`,ry:`${s.height/2}${s.unit}`,fill:"black"}):m.createElement("rect",{x:`${s.x}${s.unit}`,y:`${s.y}${s.unit}`,width:`${s.width}${s.unit}`,height:`${s.height}${s.unit}`,fill:"black"}))),m.createElement("rect",{fill:"black",fillOpacity:.5,width:"100%",height:"100%",mask:`url(#hole-${this.instanceId})`})):void 0,w)}};R.xOrds=["e","w"],R.yOrds=["n","s"],R.xyOrds=["nw","ne","se","sw"],R.nudgeStep=1,R.nudgeStepMedium=10,R.nudgeStepLarge=100,R.defaultProps={ariaLabels:{cropArea:"Use the arrow keys to move the crop selection area",nwDragHandle:"Use the arrow keys to move the north west drag handle to change the crop selection area",nDragHandle:"Use the up and down arrow keys to move the north drag handle to change the crop selection area",neDragHandle:"Use the arrow keys to move the north east drag handle to change the crop selection area",eDragHandle:"Use the up and down arrow keys to move the east drag handle to change the crop selection area",seDragHandle:"Use the arrow keys to move the south east drag handle to change the crop selection area",sDragHandle:"Use the up and down arrow keys to move the south drag handle to change the crop selection area",swDragHandle:"Use the arrow keys to move the south west drag handle to change the crop selection area",wDragHandle:"Use the up and down arrow keys to move the west drag handle to change the crop selection area"}};let ie=R;const oe=(h,e,t)=>{const r=e.getContext("2d");if(!r)throw new Error("No 2d context");const n=window.devicePixelRatio,s=h.naturalWidth/h.width,o=h.naturalHeight/h.height;e.width=Math.floor(t.width*s*n),e.height=Math.floor(t.height*o*n),r.scale(n,n),r.imageSmoothingQuality="high",r.save();const l=t.x*s,i=t.y*o;r.translate(-l,-i),r.drawImage(h,0,0,h.naturalWidth,h.naturalHeight,0,0,h.naturalWidth,h.naturalHeight),r.restore()},he=oe,A=1,B=150;function ce({openModal:h,setOpenModal:e,setCropDone:t,setCroppedImage:r}){const[n,s]=f.useState(""),o=f.useRef(null),l=f.useRef(null),[i,a]=f.useState(),p=w=>{var c;if(w.target.files){const g=(c=w.target.files)==null?void 0:c[0];if(!g)return;const x=new FileReader;x.addEventListener("load",()=>{var k;const v=new Image,y=((k=x.result)==null?void 0:k.toString())||"";v.src=y,s(y)}),x.readAsDataURL(g)}},u=w=>{const{width:c,height:g}=w.currentTarget,x=B/c*100,v=ne({unit:"%",width:x},A,c,g),y=se(v,c,g);a(y)};return d.jsx(d.Fragment,{children:d.jsxs(M,{show:h,size:"md",onClose:()=>e(!1),popup:!0,children:[d.jsx(M.Header,{}),d.jsx(M.Body,{className:" rounded-md",children:d.jsxs("div",{className:"text-center",children:[d.jsxs("label",{className:"block mb-3 w-fit",children:[d.jsx("span",{className:"sr-only",children:"Choose profile photo"}),d.jsx("input",{type:"file",accept:"image/*",onChange:p,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-1 file:px-2 file:rounded-full file:border-0 file:text-xs file:bg-gray-700 file:text-sky-300 hover:file:bg-gray-600"})]}),n&&d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"flex flex-col items-center",children:[d.jsx(ie,{crop:i,onChange:(w,c)=>a(c),keepSelection:!0,aspect:A,minWidth:B,children:d.jsx("img",{ref:o,src:n,alt:"Upload",onLoad:u})}),d.jsx("button",{className:"text-white font-medium text-xs py-2 px-4 rounded-2xl mt-4 bg-primary hover:bg-[#422c5f]",onClick:async()=>{he(o==null?void 0:o.current,l==null?void 0:l.current,D(i,(o==null?void 0:o.current).width,(o==null?void 0:o.current).height));async function w(c,g,x){const y=await(await fetch(c)).blob();return new File([y],g,{type:x})}if(l.current){const c=(l==null?void 0:l.current).toDataURL(),g=Date.now().toString(),x=await w(c,g,"image/jpeg");r(x),t(!0),e(!1)}},children:"Crop Image"})]}),i&&d.jsx("canvas",{ref:l,className:"mt-4",style:{display:"none",border:"1px solid black",objectFit:"contain",width:150,height:150}})]})]})})]})})}function de({openResetModal:h,setOpenResetModal:e}){const[t,r]=f.useState(""),[n,s]=f.useState(!1),[o,l]=f.useState(!0),[i,a]=f.useState(""),[p,u]=f.useState(!1),[w,c]=f.useState({newPass:"",confirmPass:""}),[g,x]=f.useState({currentPass:"",newPass:"",confirmPass:""}),v=C=>{C.preventDefault(),x({...g,currentPass:H("passwordLogin",t)}),s(!0)},y=C=>{const{name:P,value:j}=C.target;c({...w,[P]:j})},k=(C,P)=>C!==P?"Password is't Matching":"",L=C=>{C.preventDefault(),x({...g,newPass:H("password",w.newPass),confirmPass:H("password",w.confirmPass)||k(w.confirmPass,w.newPass)}),u(!0)};return f.useEffect(()=>{(async function(){var C;try{n&&!g.currentPass&&(await X.post("/resetPassword",{currentPassword:t},{withCredentials:!0})).data.success&&(a(""),l(!1))}catch(P){const j=P,I=((C=j==null?void 0:j.response)==null?void 0:C.data).message;a(I)}})()},[t,g.currentPass,n]),f.useEffect(()=>{(async function(){var C;try{p&&!g.newPass&&!g.confirmPass&&(await X.patch("/resetPassword",{newPassworrd:w.newPass},{withCredentials:!0})).data.success&&(W.success("Password Reset Successfull"),e(!1))}catch(P){const j=P,I=((C=j==null?void 0:j.response)==null?void 0:C.data).message;a(I)}})()},[g.confirmPass,g.newPass,w.newPass,p,e]),d.jsx(d.Fragment,{children:d.jsxs(M,{show:h,size:"md",onClose:()=>e(!1),popup:!0,children:[o&&d.jsx(M.Header,{}),d.jsx(M.Body,{children:o?d.jsx(d.Fragment,{children:d.jsxs("div",{className:"flex flex-col",children:[d.jsx("div",{className:"flex justify-center w-full rounded bg-red-100",children:i&&d.jsx("small",{className:" text-red-600",children:i})}),d.jsx("label",{htmlFor:"password",className:"font-bold",children:"Enter your Current password"}),g.currentPass&&d.jsx("small",{className:"text-red-600 ml-2",children:g.currentPass}),d.jsx("input",{type:"password",value:t,onChange:C=>r(C.target.value),className:"rounded-md w-full mt-3"}),d.jsx("button",{onClick:v,className:"w-full bg-primary rounded-md mt-3 text-white py-2",children:"Submit"})]})}):d.jsx(d.Fragment,{children:d.jsxs("div",{className:"mt-5",children:[d.jsx("div",{className:"flex justify-center w-full rounded bg-red-100",children:i&&d.jsx("small",{className:" text-red-600",children:i})}),d.jsx("label",{htmlFor:"password",className:"font-bold",children:"Enter new password"}),g.newPass&&d.jsx("small",{className:"text-red-600 ml-2",children:g.newPass}),d.jsx("input",{type:"password",value:w.newPass,className:"rounded-md w-full mt-3",name:"newPass",onChange:y}),d.jsx("label",{htmlFor:"password",className:"font-bold",children:"Confirm Password"}),g.confirmPass&&d.jsx("small",{className:"text-red-600 ml-2",children:g.confirmPass}),d.jsx("input",{type:"password",value:w.confirmPass,className:"rounded-md w-full mt-3",name:"confirmPass",onChange:y}),d.jsx("button",{onClick:L,className:"w-full bg-primary rounded-md mt-3 text-white py-2",children:"Submit"})]})})})]})})}function we(){const h=T(),{profile:e}=$(u=>u.userProfile),{user:t}=$(u=>u.auth),[r,n]=f.useState(!1),[s,o]=f.useState(),[l,i]=f.useState(!1),[a,p]=f.useState(!1);return f.useEffect(()=>{if(l&&s){if(e!=null&&e.profile){const u=q(G,e.profile);Q(u).then(()=>{console.log("old image deleted")}).catch(w=>{console.log(w)})}h(V(s))}},[l,s,h,e==null?void 0:e.profile]),d.jsxs(d.Fragment,{children:[d.jsx(ce,{setCroppedImage:o,openModal:r,setOpenModal:n,setCropDone:i}),d.jsx(de,{setOpenResetModal:p,openResetModal:a}),d.jsxs("div",{className:"flex bg-[#302343] shadow-md relative flex-wrap items-center justify-center w-full h-fit gap-7 ring-1 py-5 ring-[#4d2389] rounded-xl",children:[d.jsxs("div",{className:"img-wrapper sm:mt-0 mt-5 relative",children:[d.jsx("img",{src:e!=null&&e.profile?e.profile:"https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_640.png",className:"rounded-full m-0 w-40 ring-1 ring-[#9747FF] ",alt:""}),d.jsx("div",{onClick:()=>n(!0),className:"bg-[#372450] rounded-full text-[#9747FF] absolute  top-3 right-3 p-2 ring-1 ring-[#9747FF] cursor-pointer hover:shadow-lg",children:d.jsx(O,{})})]}),d.jsxs("div",{className:"space-y-1 flex text-white text-xl flex-col  md:mr-16 justify-center md:justify-start",children:[d.jsx("h1",{className:"font-bold text-4xl",children:e==null?void 0:e.name}),d.jsx("h1",{children:t==null?void 0:t.email}),d.jsx("h1",{children:e==null?void 0:e.phone})]}),d.jsx("button",{className:"absolute top-3 right-5 text-blue-600",onClick:()=>p(!0),children:"Reset Password?"})]})]})}export{we as P};
