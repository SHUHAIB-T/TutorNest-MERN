import{a as k,r as c,aT as T,j as e,A as F,D as A,b,u as P,o as v,T as q,R as E,d as R,S as D,C as d,ar as I,F as L}from"./index-NQeHJbx4.js";function z({search:l,setSearch:i}){const n=k();c.useEffect(()=>{n(T(l))},[l,n]);const[r,f]=c.useState(""),o=t=>{const{name:p,value:s}=t.currentTarget;i({...l,[p]:s})};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-wrap space-y-2 md:justify-between items-center justify-center flex-shrink px-3 py-3 bg-my-bg-dark h-fit w-full ",children:[e.jsxs("div",{className:"h-fit w-[500px] flex gap-x-2",children:[e.jsxs("select",{name:"qualification",onChange:o,className:"md:w-1/3 w-28 py-1 cursor-pointer text-sm bg-gray-900 rounded-full pl-4 text-gray-200",children:[e.jsx("option",{value:"",children:"All Qualifications"}),F.map(t=>e.jsx("option",{value:t,children:t}))]}),e.jsxs("select",{name:"language",onChange:o,className:"md:w-1/3 w-28 py-1 cursor-pointer text-sm bg-gray-900 rounded-full pl-4 text-gray-200",children:[e.jsx("option",{value:"",children:"All Languages"}),A.map(t=>e.jsx("option",{value:t,children:t}))]}),e.jsxs("select",{name:"sort",onChange:o,className:"md:w-1/3 w-28 py-1 cursor-pointer text-sm bg-gray-900 rounded-full pl-4 text-gray-200",children:[e.jsx("option",{value:"",children:"Sort"}),e.jsx("option",{value:"low-high",children:"low-high"}),e.jsx("option",{value:"high-low",children:"high-low"}),e.jsx("option",{value:"popular",children:"most popular"})]})]}),e.jsx("div",{className:"",children:e.jsx("form",{onSubmit:t=>{t.preventDefault(),i({...l,search:r})},children:e.jsxs("div",{className:"relative text-gray-600 focus-within:text-gray-400",children:[e.jsx("span",{className:"absolute inset-y-0 left-0 flex items-center pl-2",children:e.jsx("button",{type:"submit",className:"p-1 focus:outline-none focus:shadow-outline",children:e.jsx("svg",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",className:"w-6 h-6",children:e.jsx("path",{d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})}),e.jsx("input",{type:"search",name:"q",value:r,onChange:t=>f(t.target.value),className:"py-1 text-sm text-white bg-gray-900 rounded-full pl-10 focus:border-0 focus:outline-none  focus:text-gray-200",placeholder:"Search..."})]})})})]})})}const B=R({palette:{mode:"dark"}});function Q({_id:l,bio:i,languages:n,name:r,pricing:f,profile:o,qualification:t,averageRating:p,isRequested:s,isInConnection:j}){const[h,g]=c.useState(""),{user:y}=b(a=>a.auth),[w,u]=c.useState(s);c.useEffect(()=>{u(s)},[s]);const x=P(),N=a=>{g(a)};c.useEffect(()=>{(async function(){if(h)try{await v.post("/chat",{userId:h},{withCredentials:!0}),g(""),x("/student/chat")}catch(a){g(""),console.log(a)}})()},[h,x]);const C=async a=>{if(y)try{const{data:m}=await v.post("/student/createConnection",{teacherId:a});m.success&&(u(!0),console.log("request created"))}catch(m){u(!1),console.log(m)}else x("/login")},S=async a=>{if(y)try{const{data:m}=await v.post("/student/cancelConnection",{teacherId:a});m.success&&(u(!1),console.log("request cancelled"))}catch(m){u(!0),console.log(m)}else x("/login")};return e.jsx(e.Fragment,{children:e.jsx(q,{theme:B,children:e.jsxs("div",{className:"w-64 h-[400px] relative px-3 text-gray-200 py-4 bg-my-bg-dark rounded-lg flex flex-col items-center",children:[e.jsx("img",{src:o||"https://png.pngtree.com/png-clipart/20210915/ourmid/pngtree-user-avatar-login-interface-abstract-blue-icon-png-image_3917504.jpg",alt:"",className:"w-28 h-28 rounded-full object-cover ring-2 ring-my-ring"}),e.jsxs("div",{className:"flex  text-center flex-col items-center",children:[e.jsx("h1",{className:"font-bold text-xl",children:r}),e.jsx("small",{children:i})]}),e.jsxs("div",{className:"flex w-full items-center justify-between px-5",children:[e.jsx(E,{name:"read-only",className:"mt-3",value:p||0,size:"small",readOnly:!0}),e.jsxs("span",{className:"text-green-500 mt-3 font-bold",children:[" â‚¹",f]})]}),e.jsx("div",{className:"w-full h-1 bg-my-ring/[0.2] mt-2"}),e.jsx("div",{className:"flex flex-wrap justify-center gap-2 my-2 max-h-8 overflow-auto w-full px-3",children:n==null?void 0:n.map(a=>e.jsx("small",{className:"px-3 text-gray-400 bg-my-input h-fit rounded-full",children:a}))}),e.jsx("div",{className:"w-full h-1 bg-my-ring/[0.2] "}),e.jsx("div",{className:"flex flex-wrap justify-center gap-2 my-2 max-h-10 overflow-auto w-full px-3",children:t==null?void 0:t.map(a=>e.jsx("small",{className:"px-3 text-gray-400 bg-my-input h-fit rounded-full",children:a}))}),e.jsxs("div",{className:"absolute bottom-4",children:[!j&&!w&&e.jsx("button",{onClick:()=>C(l),className:"font-bold py-1 px-3 bg-primary rounded-lg",children:"connect now"}),w&&!j&&e.jsx("button",{onClick:()=>S(l),className:"font-bold py-1 px-3 bg-primary rounded-lg",children:"cancell request"}),j&&e.jsx("button",{onClick:()=>{N(l)},className:"font-bold py-1 px-3 bg-primary rounded-lg",children:"chat now"})]})]})})})}function M(){const{isLoading:l,tutors:i,count:n}=b(s=>s.tutors),[r,f]=c.useState(1),[o,t]=c.useState({language:"",page:"",search:"",sort:"",qualification:""}),p=s=>f(s);return c.useEffect(()=>{r>=1&&t({...o,page:r.toString()})},[r]),e.jsxs(e.Fragment,{children:[e.jsx(D,{}),e.jsxs("div",{className:"flex flex-wrap bg-secondary flex-col w-full min-h-screen text-gray-200",children:[e.jsx(z,{search:o,setSearch:t}),e.jsxs("div",{className:"flex md:p-10 gap-6 p-3 items-center justify-center w-full flex-wrap",children:[l&&e.jsxs(e.Fragment,{children:[e.jsx(d,{}),e.jsx(d,{}),e.jsx(d,{}),e.jsx(d,{}),e.jsx(d,{}),e.jsx(d,{}),e.jsx(d,{}),e.jsx(d,{})]}),i.length>0&&i.map((s,j)=>{var h,g,y,w,u,x;return e.jsx(e.Fragment,{children:e.jsx(Q,{_id:s._id,isRequested:s.isRequested,isInConnection:s.isInConnection,averageRating:s.averageRating,bio:(h=s.profile)==null?void 0:h.bio,languages:(g=s.profile)==null?void 0:g.languages,name:(y=s.profile)==null?void 0:y.name,pricing:(w=s.profile)==null?void 0:w.pricing,profile:(u=s.profile)==null?void 0:u.profile,qualification:(x=s.profile)==null?void 0:x.qualification},j)})}),i.length===0&&!l&&e.jsx("div",{className:"",children:e.jsx("h1",{children:"No tutors"})}),n>0&&e.jsx("div",{className:"flex mypage overflow-x-auto w-[80%] sm:justify-end",children:e.jsx(I,{currentPage:r,totalPages:n,onPageChange:p})})]})]}),e.jsx(L,{})]})}export{M as default};
