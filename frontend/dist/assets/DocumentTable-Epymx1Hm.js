import{j as e,M as u,r as l,a as g,B as o,G as r,Q as C,J as M,a3 as v,K as D}from"./index-4mQrzorV.js";import{d as H,a as B}from"./Cancel-bRrxsMnd.js";function E({opentModal:a,setOpenModal:c,setImage:i,url:n}){return e.jsx(e.Fragment,{children:e.jsxs(u,{show:a,size:"md",onClose:()=>{c(!1),i("")},popup:!0,children:[e.jsx(u.Header,{}),e.jsx(u.Body,{children:e.jsx("img",{src:n,className:"w-full",alt:""})})]})})}function T({documents:a,setDocuments:c,role:i,setUpdateStatus:n,updateStatus:x}){const[w,h]=l.useState(!1),[m,f]=l.useState(""),[d,j]=l.useState(""),y=s=>{f(s)},N=(s,t)=>{C.fire({title:"Are you sure wan't to delete this?",icon:"question",showCancelButton:!0,confirmButtonText:"Yes Delete it!"}).then(b=>{if(b.isConfirmed){const k=M(D,t);v(k).then(()=>{}).catch(()=>{o.error("Error")}),j(s)}})},p=s=>{i==="ADMIN"&&n&&C.fire({title:"Are you sure want to do this?",icon:"question",confirmButtonText:"Okey!",showCancelButton:!0}).then(t=>{t.isConfirmed&&n(s)})};return l.useEffect(()=>{(async function(){if(d)try{await g.patch("/tutor/deletedocument",{id:d},{withCredentials:!0})&&(j(""),c(a.filter(t=>t._id!==d)),o.success("Document deleted!"))}catch(s){const t=s;o.error(t.message)}})()},[d,a,c]),l.useEffect(()=>{(async function(){if(i==="ADMIN"&&x&&n)try{(await g.patch(`/admin/document/${x}`,{},{withCredentials:!0})).data.success&&(n(""),o.success("status updated!"))}catch(s){const t=s;o.error(t.message)}})()},[x,i,n]),l.useEffect(()=>{m&&h(!0)},[h,m]),e.jsxs("div",{className:"overflow-x-auto mytable w-[80%] mt-10",children:[e.jsx(E,{setImage:f,opentModal:w,setOpenModal:h,url:m}),e.jsxs(r,{children:[e.jsxs(r.Head,{children:[e.jsx(r.HeadCell,{children:"SL No"}),e.jsx(r.HeadCell,{children:"Name"}),e.jsx(r.HeadCell,{children:"Uploaded On"}),e.jsx(r.HeadCell,{children:"Status"}),e.jsx(r.HeadCell,{children:"Document"}),e.jsx(r.HeadCell,{children:e.jsx("span",{className:"sr-only",children:"Eidi/delet"})})]}),e.jsx(r.Body,{className:"divide-y",children:a.length>0&&a.map((s,t)=>e.jsx(e.Fragment,{children:e.jsxs(r.Row,{className:"bg-white dark:border-gray-700 dark:bg-gray-800",children:[e.jsx(r.Cell,{className:"whitespace-nowrap font-medium text-gray-900 dark:text-white",children:t+1}),e.jsx(r.Cell,{children:s.name}),e.jsx(r.Cell,{children:s.createdAt}),e.jsx(r.Cell,{children:s.isVerified?e.jsx("span",{className:"text-green-500",children:"Verified"}):e.jsx("span",{className:"text-red-600",children:"Not Verified"})}),e.jsx(r.Cell,{children:e.jsx("span",{onClick:()=>y(s.document),className:"font-medium cursor-pointer text-cyan-600 hover:underline dark:text-cyan-500",children:"View"})}),e.jsx(r.Cell,{children:i==="TUTOR"?e.jsx("span",{onClick:()=>N(s._id,s.document),className:"font-medium ms-5 px-3 py-2 rounded-md cursor-pointer text-white bg-red-600 hover:bg-red-900",children:"delete"}):e.jsx(e.Fragment,{children:s.isVerified?e.jsx("span",{onClick:()=>p(s._id),children:e.jsx(B,{fontSize:"large",className:"text-red-500 hover:text-red-700 cursor-pointer"})}):e.jsx("span",{onClick:()=>p(s._id),children:e.jsx(H,{fontSize:"large",className:"text-green-500 hover:text-green-700 cursor-pointer"})})})})]})}))})]})]})}export{T as D};
